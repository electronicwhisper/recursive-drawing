<!DOCTYPE html>
<html>
<head>
<!-- <link rel="stylesheet" href="compiled/css/font/font-awesome.css" type="text/css" media="screen" title="no title" charset="utf-8"> -->
<link rel="stylesheet" href="vendor/jquery.contextMenu/jquery.contextMenu.css" type="text/css" media="screen" title="no title" charset="utf-8">


<link rel="stylesheet" href="compiled/css/style.css" type="text/css" media="screen" title="no title" charset="utf-8">
<title>Recursive Drawing</title>
</head>
<body>

<!-- <div style="position: absolute; top: 10px; left: 10px">
  Click and drag the circles.
</div> -->

<div id="workspace">
  <canvas id="workspaceCanvas" data-bind="canvas: focus()"></canvas>
  <canvas id="drawFurther" data-bind="css: {hidden: mouseOver()}"></canvas>
</div>

<div id="sidebar">
  <!-- <div id="definitions"></div> -->
  <!-- <div id="addDefinition">
    <i class="icon-plus"></i>
  </div> -->
  
  <div id="definitions" data-bind="foreach: definitions">
    <div class="definition mini" data-bind="css: {focused: $data === $root.focus()}">
      <canvas data-bind="canvas: $data"></canvas>
    </div>
  </div>
  
  <button class="button" id="addDefinition">+</button>
  
  <!-- <div style="width: 40px; height: 40px; background-color: green; position: relative">
    <canvas data-bind="canvas: test"></canvas>
  </div>
  <div style="width: 50px; height: 50px; background-color: purple; position: relative">
    <canvas data-bind="canvas: test"></canvas>
  </div> -->
</div>



<script type="text/html" id="component-template">
  <div class="component" data-bind="css: {highlighted: $root.isHighlighted(componentPath)}">
    
    <div class="mini">
      <div class="disclosure" data-bind="css: {collapsed: rootDefinition.ui.isCollapsed(componentPath), expanded: rootDefinition.ui.isExpanded(componentPath)}, click: rootDefinition.ui.toggleExpanded"></div>
      <canvas data-bind="canvas: rootDefinition, componentPath: componentPath"></canvas>
    </div>
  </div>
  <div data-bind="if: rootDefinition.ui.isExpanded(componentPath)">
    <!-- <div class="children" data-bind="foreach: _.reverse(_.last(componentPath).definition.components())"> -->
    <div class="children" data-bind="foreach: _.last(componentPath).definition.components()">
      <div data-bind="template: {name: 'component-template', data: {rootDefinition: $parent.rootDefinition, componentPath: $parent.componentPath.concat($data)}}"></div>
    </div>
  </div>
</script>




<div id="sidebarRight">
  <!-- <div data-bind="foreach: _.reverse(focus().components())"> -->
    <div data-bind="foreach: focus().components()">
    <div data-bind="template: { name: 'component-template', data: {rootDefinition: $root.focus(), componentPath: [$data]} }"></div>
  </div>
</div>

<script src="vendor/numeric-1.0.2.min.js"></script>
<script src="vendor/underscore-min.js"></script>

<script src="vendor/keymaster.min.js"></script>

<script src="vendor/jquery-1.7.2.min.js"></script>
<script src="vendor/jquery.mousewheel.js"></script>
<script src="vendor/jquery.contextMenu/jquery.contextMenu.js"></script>
<script src="vendor/jquery.contextMenu/jquery.ui.position.js"></script>

<script src="vendor/knockout-2.0.0.js"></script>

<script src="vendor/stats.js"></script>

<script src="compiled/app.js"></script>

<script>
require("app")();
</script>

</body>
</html>